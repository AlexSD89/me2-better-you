# 智链平台技术对接文档

## 🎯 项目基本信息

**项目名称**: 智链平台 (Zhilink Platform)  
**项目版本**: 0.1.0  
**开发端口**: 1300  
**项目类型**: AI驱动的企业咨询服务平台  
**技术栈**: Next.js 15 + React 19 + TypeScript + Tailwind CSS  
**环境隔离**: 多环境配置支持 (本地/开发/生产)  

**文档版本**: v1.0  
**创建日期**: 2025年1月  
**最后更新**: 2025年1月  

---

## 🏗️ 技术架构概览

### **前端架构**
```
┌─────────────────────────────────────────────────────────────┐
│                    Next.js 15 App Router                   │
├─────────────────────────────────────────────────────────────┤
│  Pages:                                                    │
│  ├── / (主页) → /chat (对话界面)                          │
│  ├── /chat (AI对话界面)                                   │
│  ├── /product (商场页面)                                  │
│  ├── /supplier (供应商驾驶舱)                             │
│  └── /partner (分销伙伴驾驶舱)                            │
├─────────────────────────────────────────────────────────────┤
│  Core:                                                     │
│  ├── 状态管理: Zustand + React Hooks                      │
│  ├── UI组件: Radix UI + Lucide React                      │
│  ├── 样式: Tailwind CSS + Framer Motion                   │
│  └── 类型: TypeScript (严格模式)                          │
└─────────────────────────────────────────────────────────────┘
```

### **数据流架构**
```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   用户输入   │───▶│  前端状态    │───▶│  UI渲染     │
└─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │
       ▼                   ▼                   ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  API调用    │    │  数据缓存    │    │  组件更新   │
└─────────────┘    └─────────────┘    └─────────────┘
```

---

## 🔧 环境隔离配置

### **环境配置文件要求**

为了确保开发环境的隔离和安全性，项目必须配置以下环境文件：

#### **1. 本地开发环境** (`.env.local`)
```bash
# 本地开发配置
NODE_ENV=development
NEXT_PUBLIC_APP_ENV=local
PORT=1300
NEXT_PUBLIC_API_BASE_URL=http://localhost:1300/api
DATABASE_URL=postgresql://username:password@localhost:5432/zhilink_local
```

#### **2. 开发环境** (`.env.development`)
```bash
# 开发环境配置
NODE_ENV=development
NEXT_PUBLIC_APP_ENV=dev
PORT=1300
NEXT_PUBLIC_API_BASE_URL=http://localhost:3000/api
DATABASE_URL=postgresql://username:password@localhost:5432/zhilink_dev
```

#### **3. 生产环境** (`.env.production`)
```bash
# 生产环境配置
NODE_ENV=production
NEXT_PUBLIC_APP_ENV=prod
PORT=3000
NEXT_PUBLIC_API_BASE_URL=https://api.zhilink.com
DATABASE_URL=postgresql://username:password@production-host:5432/zhilink_prod
```

### **环境隔离原则**

1. **端口隔离**: 开发环境使用1300端口，生产环境使用3000端口
2. **数据库隔离**: 每个环境使用独立的数据库实例
3. **API隔离**: 不同环境指向不同的API端点
4. **配置隔离**: 敏感信息通过环境变量管理，不提交到代码库

### **环境变量管理**

- 使用 `@t3-oss/env-nextjs` 进行类型安全的环境变量验证
- 所有环境文件必须添加到 `.gitignore` 中
- 提供 `.env.example` 作为环境变量模板

---

## 📁 项目结构详解

### **核心目录结构**
```
zhilink-platform/
├── src/
│   ├── app/                          # Next.js App Router
│   │   ├── page.tsx                  # 主页 (跳转到/chat)
│   │   ├── chat/page.tsx             # 对话界面 (核心功能)
│   │   ├── product/page.tsx          # 商场页面
│   │   ├── supplier/page.tsx         # 供应商驾驶舱
│   │   ├── partner/page.tsx          # 分销伙伴驾驶舱
│   │   └── api/                      # API路由
│   │       └── project-cards/        # 项目卡片API
│   │           └── route.ts          # 统一数据接口
│   ├── components/                   # UI组件库
│   │   ├── ui/                      # 基础UI组件 (Radix UI)
│   │   └── zhilink-logo.tsx         # 品牌Logo组件
│   ├── core/                        # 核心业务逻辑
│   ├── hooks/                       # 自定义Hooks
│   │   └── use-project-cards.ts     # 项目卡片数据Hook
│   ├── services/                    # 数据服务层
│   │   └── project-card-service.ts  # 项目卡片服务
│   ├── types/                       # 类型定义
│   │   └── project-card.ts          # 项目卡片类型
│   ├── lib/                         # 工具库
│   └── styles/                      # 样式文件
├── public/                          # 静态资源
├── docs/                            # 文档目录
└── package.json                     # 项目配置
```

### **开发脚本与环境**

#### **环境相关脚本**
```bash
# 本地开发 (使用 .env.local)
npm run dev

# 开发环境 (使用 .env.development)  
npm run dev:dev

# 生产环境 (使用 .env.production)
npm run build && npm run start
```

#### **环境切换说明**
- `npm run dev` - 默认使用 `.env.local` 配置
- `npm run dev:dev` - 使用 `.env.development` 配置
- `npm run start` - 使用 `.env.production` 配置

---

### **关键文件说明**

#### **1. 对话界面** (`src/app/chat/page.tsx`)
- **功能**: AI驱动的企业咨询服务
- **核心特性**:
  - 实时对话交互
  - 专家团队可视化
  - 智能推荐系统
  - 命令面板 (Cmd+K)
- **状态管理**: React useState + 自定义Hooks
- **数据源**: `useProjectCards` Hook

#### **2. 数据服务** (`src/services/project-card-service.ts`)
- **功能**: 统一的项目卡片数据服务
- **特性**:
  - 缓存机制 (5分钟)
  - 智能推荐
  - 搜索和筛选
  - 错误处理
- **API端点**: `/api/project-cards`

#### **3. 状态管理Hook** (`src/hooks/use-project-cards.ts`)
- **功能**: 项目卡片数据状态管理
- **特性**:
  - 加载状态管理
  - 错误处理
  - 数据缓存
  - 类型安全

---

## 🎯 核心功能模块

### **1. 对话界面 (`/chat`)**
```typescript
// 主要功能
- 实时对话交互
- 专家团队状态可视化
- 智能推荐卡片
- 命令面板 (Cmd+K)
- 会话分享功能
- 结构化数据展示
```

### **2. 商场页面 (`/product`)**
```typescript
// 主要功能
- 瀑布流卡片布局
- 搜索和筛选
- 统一数据服务集成
- 响应式设计
```

### **3. 供应商驾驶舱 (`/supplier`)**
```typescript
// 主要功能
- Tabs组件界面
- 数据可视化
- 管理功能
```

### **4. 分销伙伴驾驶舱 (`/partner`)**
```typescript
// 主要功能
- 基础页面框架
- 待扩展功能
```

---

## ⚙️ 开发环境配置

### **环境要求**
- Node.js >= 18.0.0
- pnpm >= 8.0.0
- TypeScript >= 5.0.0

### **安装和启动**
```bash
# 安装依赖
pnpm install

# 开发环境启动 (端口1300)
pnpm dev

# 生产构建
pnpm build

# 生产环境启动
pnpm start
```

### **开发工具**
```bash
# 代码检查
pnpm lint

# 类型检查
pnpm typecheck

# 格式检查
pnpm format:check

# 格式修复
pnpm format:write
```

---

## 📊 数据架构

### **当前数据模型**
```typescript
// 项目卡片数据结构
interface ProjectCard {
  id: string | number;
  title: string;
  subtitle: string;
  role: string;
  company: string;
  experience: string;
  skills: string[];
  rating: number;
  reviews: number;
  matchRate?: number;
  roi: string;
  cost: string;
  implementation: string;
  priority: 'high' | 'medium' | 'low';
  status: 'available' | 'busy' | 'offline';
}
```

### **API接口**
```typescript
// 项目卡片API
GET /api/project-cards?mode=all
GET /api/project-cards?mode=recommend&query=客服
GET /api/project-cards?mode=search&query=销售

// 响应格式
{
  success: boolean;
  data: ProjectCard[];
  message?: string;
}
```

### **缓存策略**
- **客户端缓存**: 5分钟
- **服务端缓存**: 待实现
- **缓存键**: `project-cards-${mode}-${query}`

---

## 🎨 UI/UX设计系统

### **配色方案**
```css
/* 克制配色体系 - 强调色 < 8% */
--deep-space: #0F172A;        /* 主背景色 */
--accent-interactive: #1E40AF; /* 交互色 */
--accent-warm: #D97706;       /* 暖色 */
--accent-success: #059669;     /* 成功色 */
--text-primary: #F8FAFC;      /* 主文字 */
--text-secondary: #94A3B8;    /* 次要文字 */
```

### **组件库**
- **基础组件**: Radix UI
- **图标**: Lucide React
- **动画**: Framer Motion
- **响应式**: Tailwind CSS

### **设计原则**
- 克制配色 (强调色 < 8%)
- 玻璃拟态效果
- 流畅动画过渡
- 响应式设计

---

## ✅ 已完成功能

### **前端架构**
- ✅ Next.js 15 + React 19 基础架构
- ✅ TypeScript 严格模式配置
- ✅ Tailwind CSS + Framer Motion 样式系统
- ✅ Radix UI 组件库集成
- ✅ 路径别名配置 (`~/*`)

### **页面功能**
- ✅ 主页跳转逻辑
- ✅ 对话界面基础功能
- ✅ 商场页面瀑布流布局
- ✅ 供应商和分销伙伴页面框架

### **数据服务**
- ✅ 统一的项目卡片数据服务
- ✅ API路由实现
- ✅ 自定义Hook状态管理
- ✅ 缓存机制

### **UI/UX**
- ✅ 设计系统实现
- ✅ 响应式布局
- ✅ 动画效果
- ✅ 命令面板 (Cmd+K)

---

## 🔄 进行中功能

### **对话界面优化**
- 🔄 实时交互体验优化
- 🔄 专家团队状态管理
- 🔄 智能推荐算法优化

### **数据集成**
- 🔄 统一数据流完善
- 🔄 错误处理机制
- 🔄 加载状态优化

---

## 📋 待开发功能

### **后端服务** (需要工程师开发)
- ❌ 用户认证系统
- ❌ 数据库集成
- ❌ 实时通信 (WebSocket)
- ❌ 文件上传服务
- ❌ 支付集成

### **AI Agent系统**
- ❌ 多Agent协作架构
- ❌ 智能推荐算法
- ❌ 自然语言处理
- ❌ 上下文管理

### **企业级功能**
- ❌ 用户管理
- ❌ 权限控制
- ❌ 数据统计
- ❌ 报表系统

---

## 🚨 技术债务

### **代码质量**
- ⚠️ 部分组件过于复杂，需要拆分
- ⚠️ 部分any类型需要具体化
- ⚠️ 缺少单元测试
- ⚠️ 错误处理不够完善

### **性能优化**
- ⚠️ 大数据量时的性能优化
- ⚠️ 图片懒加载
- ⚠️ 代码分割优化
- ⚠️ 缓存策略完善

### **已知问题**
- ⚠️ 部分文件仍使用 `@/` 而不是 `~/`
- ⚠️ 部分数据仍为硬编码
- ⚠️ 复杂状态需要更好的管理方案

---

## 🎯 下一步开发计划

### **短期目标 (1-2周)**
1. **完善对话界面**
   - 优化实时交互体验
   - 完善专家团队状态管理
   - 改进智能推荐算法

2. **数据服务优化**
   - 完善错误处理机制
   - 优化加载状态
   - 改进缓存策略

3. **UI/UX优化**
   - 移动端响应式优化
   - 动画效果优化
   - 用户体验改进

### **中期目标 (1个月)**
1. **后端服务开发**
   - 用户认证系统
   - 数据库设计和集成
   - API服务完善

2. **AI功能集成**
   - 智能推荐算法
   - 自然语言处理
   - 上下文管理

3. **企业级功能**
   - 用户管理
   - 权限控制
   - 数据统计

### **长期目标 (3个月)**
1. **完整的AI Agent系统**
   - 多Agent协作
   - 自适应学习
   - 智能优化

2. **平台生态**
   - 第三方集成
   - 插件系统
   - 开放API

---

## 🔗 相关资源

### **文档链接**
- [项目README](./README.md)
- [API文档](./API.md)
- [组件文档](./COMPONENTS.md)
- [部署指南](./DEPLOYMENT.md)

### **技术资源**
- [Next.js 文档](https://nextjs.org/docs)
- [React 文档](https://react.dev)
- [Tailwind CSS 文档](https://tailwindcss.com/docs)
- [Radix UI 文档](https://www.radix-ui.com)

### **开发工具**
- [TypeScript 文档](https://www.typescriptlang.org/docs)
- [ESLint 配置](./eslint.config.js)
- [Prettier 配置](./prettier.config.js)

---

## 📞 联系方式

**项目负责人**: 智链平台开发团队  
**技术支持**: 请联系项目负责人  
**文档维护**: 开发团队  

---

**文档版本**: v1.0  
**最后更新**: 2025年1月  
**下次更新**: 根据开发进度更新 