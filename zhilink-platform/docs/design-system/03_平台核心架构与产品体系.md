# 智链平台核心架构与产品体系（统一口径 v3.1）

**文档版本**: 核心架构 v1.1
**更新日期**: 2025年8月
**状态**: `架构规范，统一标准`

---

## 🏗️ 核心架构：价值链反应堆

智链平台不是一个简单的"平台"，而是一个可以无限嵌套、无限组合、无限扩展的"**价值链反应堆**"。在这个生态中，身份是流动的，能力是叠加的，利益是交织的。

### 架构核心原则

1. **万物皆产品**: 平台上的所有能力都可以被产品化
2. **人人皆渠道**: 任何用户都可以成为分销渠道
3. **身份流动**: 用户可以在不同角色间自由切换
4. **能力叠加**: 支持多重角色和能力组合

---

## 🎯 三大核心产品类型（商品）

统一商品类型：`workforce | expert_module | market_report`。

### 1. AI劳动力 (workforce)
**定义**: 标准化的、独立的AI原子能力

**特点**:
- 可组合、可复用
- 按需付费模式
- 标准化接口
- 独立部署能力

**示例**:
- 智能客服机器人
- 数据分析引擎
- 流程自动化工具
- 内容生成器

### 2. 专家模块 (expert_module)
**定义**: 专家沉淀的知识/提示词/策略模块（脑力插件），可单卖，也可编排进 Specs。

**特点**:
- 针对特定业务场景
- 开箱即用
- 可定制化配置
- 完整业务流程

**示例**:
- 销售增强套件
- 财务自动化平台
- 客户服务解决方案
- 营销自动化工具

### 3. 市场报告 (market_report)
**定义**: 报告产物发布为商品后的结果型商品（从 Report Artifact 发布而来）。

---

## 术语与边界（统一口径）
- Specs（spec_project，非商品）: `workforce + expert_module` 的编排蓝图/用户项目，执行产出结果
- Report Artifact（非商品）: 某次执行 Specs 的结果与证据链，可选择发布为商品
- market_report（商品）: 从 Artifact 发布后的结果型商品，可定价/分销
- 数据标识：统一使用 `id + slug`，并保持 `vendor/tags/analytics` 与上下游血缘可追溯

**特点**:
- 高级定制化服务
- 高价值产品
- 专家级咨询
- 行业深度洞察

**示例**:
- 行业解决方案
- 定制化咨询
- 专家培训课程
- 深度研究报告

---

## 🔄 矩阵式权责生态

### 客户实体维度

#### 个人客户 (Individual)
- **特征**: 个人用户，独立决策
- **需求**: 个人效率提升、技能增强
- **购买力**: 中等，注重性价比
- **决策周期**: 短，冲动性购买

#### 企业客户 (Enterprise)
- **特征**: 组织用户，集体决策
- **需求**: 组织效率提升、流程优化
- **购买力**: 高，注重ROI
- **决策周期**: 长，理性决策

### 能力角色维度

#### 购买者 (Buyer) - 默认角色
- **权限**: 浏览、购买、使用产品
- **限制**: 基础功能访问
- **升级路径**: 可申请成为AI供应商或分销伙伴

#### AI供应商 (AI Provider) - 需申请
- **权限**: 发布AI产品、获得收益分成
- **要求**: 技术能力验证、产品审核
- **收益**: 产品销售分成

#### 分销伙伴 (Distributor) - 需申请
- **权限**: 推广产品、获得佣金
- **要求**: 推广能力验证、业绩考核
- **收益**: 推广佣金分成

---

## 🚀 混合方案架构

### 架构特点
- **AI + 人工**: 结合AI自动化和人工专业服务
- **标准化 + 定制化**: 标准产品 + 个性化定制
- **技术 + 业务**: 技术能力 + 业务理解
- **平台 + 生态**: 平台服务 + 生态合作

### 实现方式
1. **智能路由**: 根据需求复杂度自动分配AI或人工
2. **混合工作流**: AI处理标准流程，人工处理复杂情况
3. **质量保证**: AI + 人工双重验证，确保服务质量
4. **持续学习**: 从人工服务中学习，提升AI能力

---

## 🔧 技术架构支撑

### 前端架构
- **Next.js 14**: 服务端渲染，SEO友好
- **React 18**: 组件化开发，状态管理
- **Tailwind CSS**: 原子化CSS，快速开发
- **Framer Motion**: 流畅动画，用户体验

### 后端架构
- **FastAPI**: 高性能API框架
- **PostgreSQL**: 关系型数据库
- **Redis**: 缓存和会话管理
- **Celery**: 异步任务处理

### AI服务架构
- **OpenAI API**: 大语言模型服务
- **自定义模型**: 专业领域模型
- **知识图谱**: 领域知识管理
- **推荐引擎**: 智能推荐算法

---

## 📊 数据架构设计（与统一口径对齐）

### 核心数据实体（建议迁移至 CMS/Strapi）
```sql
-- 账户与角色
account(id, email, ...)
role_activation(id, account_id, role enum('buyer','vendor','distributor'), status, applied_at, approved_at)

-- 商品（统一三类）
product(id, name, slug, subtitle, type enum('workforce','expert_module','market_report'), description, hero_media, pricing_model enum('free','trial','one_time','subscription'), price, vendor_id, likes, installs, runs, rating)
product_tag(product_id, tag_id)
tag(id, name, color)

-- Specs 项目与报告产物（非商品层）
spec_project(id, owner_account_id, title, use_case, blueprint json, latest_report_id)
spec_attached_product(spec_project_id, product_id)
report_artifact(id, title, summary, pages json, source_spec_id, is_published boolean, published_product_id nullable)

-- 分销与结算
commission_rule(singleton: default_rate, special_rules json)
referral_link(id, code, owner_account_id, product_id)
commission_log(id, referral_link_id, order_id, amount, rate, created_at)
payout(id, owner_account_id, amount, status, created_at)
```

### 数据流设计
1. **用户行为数据**: 浏览、搜索、购买等行为记录
2. **AI交互数据**: 对话内容、角色切换、推荐反馈
3. **业务数据**: 订单、收入、用户增长等核心指标
4. **分析数据**: 用户画像、产品偏好、市场趋势

统一主键与标识：内部 `id` + 对外 `slug`；关系：`vendor`、`tags`、`analytics`；商品→Specs→报告之间保持血缘可追溯。

---

## 🎯 业务目标与KPI

### 核心业务目标
- **用户增长**: 注册用户数、活跃用户数
- **产品使用**: 产品购买率、使用频率
- **收入增长**: 总收入、ARPU、LTV
- **生态健康**: 供应商数量、分销伙伴数量

### 关键绩效指标
- **转化率**: 浏览到购买的转化率
- **留存率**: 用户留存和复购率
- **满意度**: 用户满意度和推荐率
- **效率**: AI服务响应时间和准确率

---

**架构维护**: 技术架构团队  
**最后更新**: 2025年8月  
**版本**: 1.1.0