# 智链平台最终统一说明（覆盖 01-05 全部内容）

版本: 1.0.0 | 日期: 2025-08-11 | 状态: 最终定稿（SSoT）

本文件是 01_核心设计、02_业务架构、03_技术实现、04_功能特性、05_测试文档 的唯一统一总览与口径对齐。历史或外部资料如有不一致，以本文件与 docs/ 内对应章节为准。

---

## 目录
1. 统一术语与边界
2. 01 核心设计（宏观哲学 → 视觉 Tokens → 组件约束）
3. 02 业务架构（产品类型与流程 → 价值闭环）
4. 03 技术实现（架构策略 → 协议/认证 → 代码锚点）
5. 04 功能特性（定义 → 价值 → 行为/流程 → 技术要点）
6. 05 测试文档（覆盖面 → 验收要点）
7. 版本与维护（变更与治理）

---

## 1. 统一术语与边界
- 单一事实来源：仅以 docs/ 为准；外部仅作引用要点。
- 关键术语：思考块、动态推荐卡片、首席顾问激活、拂晓与深空、混合方案架构（详见《统一术语与口径词典.md》）。
- 边界：本文件负责“宏观到微观”的最终口径与执行锚点，不重复实现细节；实现细节以各分章与代码为准。

---

## 2. 01 核心设计（Design Philosophy & Visual System）
- 设计哲学：拂晓与深空（Dawn & Deep Space）
  - 深空：#05080E 背景基石，营造沉浸/专业。
  - 拂晓：品牌梯度与交互强调色，承担高亮与反馈。
- 统一色彩：Cloudsway 紫青科技风
  - 主色与渐变：统一按钮、链接、边框、聚焦态等。
  - 角色/卡片：基于紫青体系做细微区分，保持一致性。
- 动效叙事：过程可视化，AG-UI 事件驱动动画。

参见：`01_核心设计/*`

---

## 3. 02 业务架构（Business Architecture）
- 三大产品类型：AI劳动力、解决方案、专家知识包（旧口径已合并）。
- 矩阵式权责：客户实体（个人/企业）× 角色（购买者/AI供应商/分销伙伴）。
- 核心流程：对话入口 → 智能分析 → 动态推荐 →（必要时）首席顾问激活 → 报告/成果 → 转化复用。
- 价值闭环：行为埋点 → 标签 → 客户评分 → 人工介入。

参见：`02_业务架构/*`

---

## 4. 03 技术实现（Engineering & Architecture）
- 技术栈：Next.js/React/TS/Tailwind/Framer Motion；Strapi/Refine/PostgreSQL；Docker。
- 架构：混合方案架构（/ 欢迎页 + /chat 交互页；按需加载）。
- 认证：JWT；游客会话 →（持久化动作触发）→ 注册/登录 → 会话绑定。
- 协议：AG-UI 事件模型。
- 代码锚点：
  - 推理字段：`src/core/messages/*`（reasoning_content → reasoningContent）。
  - 推荐：`src/hooks/use-smart-recommendations.ts`、`src/app/chat/page.tsx`。

参见：`03_技术实现/*`

---

## 5. 04 功能特性（Key Features）
- 思考块（Thought Block）
  - 价值：信任、洞察、专业感、二次创造。
  - 行为：思考阶段展开；接收计划内容自动折叠；手动可控；流式 Markdown。
  - 技术：reasoning_content 合并；Radix Collapsible；主题切换与动效。
- 动态推荐卡片（Dynamic Recommendation Card）
  - 价值：变“搜索”为“推荐”；结构化信息；CTA 驱动；个性化。
  - 流程：触发 → useSmartRecommendations → SmartRecommendationEngine → 渲染。
- 首席顾问激活（Chief Consultant Activation）
  - 价值：打破 AI 天花板；确定性与信任；高附加值；无缝升级。
  - 决策：用户价值评分 × 需求复杂度 × 触发条件（自动/手动/特殊）。

参见：`04_功能特性/*`

---

## 6. 05 测试文档（Testing & Verification）
- 覆盖：功能流/状态/交互/错误处理；边界输入（空/仅推理/仅计划）；混合架构切换与会话绑定；AG-UI → 动效闭环。

参见：`05_测试文档/*`

---

## 7. 版本与维护（Governance）
- SSoT：仅在 docs/ 变更；外部仅引用要点。
- 冲突：先更《统一术语与口径词典.md》→ 目标文档加“差异与取舍”。
- 同步：代码实现变更需同步更新相关章节与测试用例。
- 巡检：每月核对视觉 Tokens、API 字段、关键 Hook 与路由约束。

---

## 8. 执行蓝图与验收（从宏观到颗粒度）

阶段 A｜设计对齐（01_核心设计）
- 输入：品牌基调、设计哲学需求、历史视觉资料
- 产出：拂晓与深空 Tokens、Cloudsway 紫青规范、交互原则清单
- 验收（DoD）：
  - 全局变量与色板在文档与代码一致（样例页可验证）
  - 设计原则与组件规范在 `01_核心设计/*` 成文

阶段 B｜业务对齐（02_业务架构）
- 输入：产品类型清单、目标客群与角色、业务流程草案
- 产出：三大产品类型定义、矩阵式权责生态、核心业务流程图
- 验收：
  - 三大类型/角色/流程在 `02_业务架构/*` 一致
  - 与功能与路由的映射关系清晰

阶段 C｜架构与工程（03_技术实现）
- 输入：性能与上线约束、接口与后端能力、前端交互要求
- 产出：混合方案架构、认证与游客会话策略、AG-UI 协议要点
- 验收：
  - 路由与页面职责：/（欢迎）与 /chat（交互）拆分明确
  - 认证流与会话绑定流程有图有文，字段一致

阶段 D｜功能落地（04_功能特性）
- 输入：功能定义与价值、交互稿、数据字段对齐
- 产出：思考块、动态推荐卡片、首席顾问激活三大功能说明与实现要点
- 验收：
  - 字段口径：`reasoning_content → reasoningContent` 一致，可回溯到代码
  - 生成/触发流程闭环：Hook/服务/组件链路清晰

阶段 E｜测试与验收（05_测试文档）
- 输入：功能清单与边界条件、错误与降级策略
- 产出：功能/交互流程测试用例与验收标准
- 验收：
  - 边界输入（空/仅推理/仅计划）均覆盖
  - 混合架构页面切换与会话绑定可重复验证

里程碑（Milestones）
- M1：设计与业务对齐完成（A+B）
- M2：架构方案冻结（C）
- M3：关键功能验收通过（D）
- M4：测试回归与发布准备完成（E）

变更控制（Change Control）
- 任何口径更改先更新《统一术语与口径词典.md》，再同步分章与本总章
- 版本化：在相关文档首屏标注版本与日期

职责映射（简化 RACI）
- 设计负责人：01；业务负责人：02；技术负责人：03；功能 Owner：04；测试负责人：05
- 本总章 Owner：跨域整合（对齐冲突、把关验收）

索引映射（从总章到分章与代码）
- 术语与口径 → `统一术语与口径词典.md`
- 设计 Tokens/原则 → `01_核心设计/*`
- 业务模型/流程 → `02_业务架构/*`
- 架构/协议/认证 → `03_技术实现/*`
- 功能定义/实现要点 → `04_功能特性/*`
- 测试与验收 → `05_测试文档/*`
- 关键代码锚点 → `src/core/messages/*`、`src/app/chat/*`、`src/hooks/*`
