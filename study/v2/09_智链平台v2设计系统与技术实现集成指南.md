# æ™ºé“¾å¹³å°v2è®¾è®¡ç³»ç»Ÿä¸æŠ€æœ¯å®ç°é›†æˆæŒ‡å—

**ç‰ˆæœ¬**: v2.0 | **æ—¥æœŸ**: 2025-08-12 | **çŠ¶æ€**: è®¾è®¡ç³»ç»Ÿé›†æˆæ ‡å‡†  
**ç›®æ ‡**: å»ºç«‹è®¾è®¡ç³»ç»Ÿä¸æŠ€æœ¯å®ç°çš„æ— ç¼é›†æˆï¼Œç¡®ä¿è®¾è®¡ç†å¿µçš„å®Œæ•´è½åœ°

---

## ğŸ¯ é›†æˆæ¶æ„æ€»è§ˆ

### è®¾è®¡ç³»ç»ŸæŠ€æœ¯æ ˆ
```yaml
è®¾è®¡å±‚:
  - Figma: è®¾è®¡ç¨¿å’Œè®¾è®¡ç³»ç»Ÿåº“
  - Design Tokens: è®¾è®¡ä»¤ç‰Œæ ‡å‡†åŒ–
  - Storybook: ç»„ä»¶æ–‡æ¡£å’Œæµ‹è¯•

å¼€å‘å±‚:
  - Next.js 15 + React 19: å‰ç«¯æ¡†æ¶
  - TypeScript: ç±»å‹å®‰å…¨ä¿éšœ
  - Tailwind CSS + è‡ªå®šä¹‰ä»¤ç‰Œ: æ ·å¼ç³»ç»Ÿ
  - Framer Motion: åŠ¨æ•ˆå®ç°
  - Radix UI: æ— éšœç¢åŸºç¡€ç»„ä»¶

é›†æˆå·¥å…·é“¾:
  - Figma Tokens: è®¾è®¡ä»¤ç‰ŒåŒæ­¥
  - Style Dictionary: ä»¤ç‰Œè½¬æ¢å·¥å…·
  - Chromatic: è§†è§‰å›å½’æµ‹è¯•
  - GitHub Actions: CI/CDè‡ªåŠ¨åŒ–
```

### é›†æˆå·¥ä½œæµç¨‹
```mermaid
graph TD
    A[Figmaè®¾è®¡ç³»ç»Ÿ] --> B[Design Tokens]
    B --> C[Style Dictionary]
    C --> D[Tailwindé…ç½®]
    D --> E[Reactç»„ä»¶]
    E --> F[Storybookæ–‡æ¡£]
    F --> G[Chromaticæµ‹è¯•]
    G --> H[è‡ªåŠ¨åŒ–éƒ¨ç½²]
    
    I[ç”¨æˆ·åé¦ˆ] --> J[æ•°æ®åˆ†æ]
    J --> K[è®¾è®¡ä¼˜åŒ–]
    K --> A
```

---

## ğŸ¨ Design Tokens å®ç°ç³»ç»Ÿ

### æ ¸å¿ƒä»¤ç‰Œæ¶æ„
```json
{
  "cloudsway": {
    "color": {
      "primitive": {
        "slate": {
          "50": { "value": "#f8fafc" },
          "900": { "value": "#0f172a" }
        },
        "indigo": {
          "400": { "value": "#818cf8" },
          "500": { "value": "#6366f1" },
          "600": { "value": "#4f46e5" }
        }
      },
      "semantic": {
        "background": {
          "main": { "value": "{cloudsway.color.primitive.slate.900}" },
          "card": { "value": "{cloudsway.color.primitive.slate.800}" },
          "glass": { "value": "rgba(30, 41, 59, 0.8)" }
        },
        "text": {
          "primary": { "value": "{cloudsway.color.primitive.slate.50}" },
          "secondary": { "value": "{cloudsway.color.primitive.slate.300}" },
          "muted": { "value": "{cloudsway.color.primitive.slate.500}" }
        },
        "brand": {
          "primary": { "value": "{cloudsway.color.primitive.indigo.500}" },
          "secondary": { "value": "{cloudsway.color.primitive.cyan.500}" },
          "accent": { "value": "{cloudsway.color.primitive.purple.500}" }
        }
      }
    },
    "typography": {
      "scale": {
        "xs": { "value": "0.75rem" },
        "sm": { "value": "0.875rem" },
        "base": { "value": "1rem" },
        "lg": { "value": "1.125rem" },
        "xl": { "value": "1.25rem" },
        "2xl": { "value": "1.5rem" },
        "3xl": { "value": "1.875rem" },
        "4xl": { "value": "2.25rem" }
      },
      "weight": {
        "normal": { "value": "400" },
        "medium": { "value": "500" },
        "semibold": { "value": "600" },
        "bold": { "value": "700" }
      },
      "lineHeight": {
        "tight": { "value": "1.25" },
        "normal": { "value": "1.5" },
        "relaxed": { "value": "1.75" }
      }
    },
    "spacing": {
      "scale": {
        "1": { "value": "0.25rem" },
        "2": { "value": "0.5rem" },
        "3": { "value": "0.75rem" },
        "4": { "value": "1rem" },
        "6": { "value": "1.5rem" },
        "8": { "value": "2rem" },
        "12": { "value": "3rem" },
        "16": { "value": "4rem" },
        "20": { "value": "5rem" },
        "24": { "value": "6rem" }
      }
    },
    "radius": {
      "none": { "value": "0" },
      "sm": { "value": "0.25rem" },
      "base": { "value": "0.5rem" },
      "md": { "value": "0.75rem" },
      "lg": { "value": "1rem" },
      "xl": { "value": "1.5rem" },
      "full": { "value": "9999px" }
    },
    "shadow": {
      "sm": { "value": "0 1px 3px 0 rgba(0, 0, 0, 0.1)" },
      "base": { "value": "0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)" },
      "md": { "value": "0 4px 6px -1px rgba(0, 0, 0, 0.1)" },
      "lg": { "value": "0 10px 15px -3px rgba(0, 0, 0, 0.1)" },
      "brand": { "value": "0 10px 30px rgba(99, 102, 241, 0.2)" },
      "glass": { "value": "0 20px 40px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(255, 255, 255, 0.05)" }
    },
    "motion": {
      "duration": {
        "fast": { "value": "150ms" },
        "base": { "value": "300ms" },
        "slow": { "value": "500ms" }
      },
      "easing": {
        "ease": { "value": "cubic-bezier(0.4, 0, 0.2, 1)" },
        "easeIn": { "value": "cubic-bezier(0.4, 0, 1, 1)" },
        "easeOut": { "value": "cubic-bezier(0, 0, 0.2, 1)" },
        "easeInOut": { "value": "cubic-bezier(0.4, 0, 0.2, 1)" }
      }
    }
  }
}
```

### Style Dictionaryé…ç½®
```javascript
// style-dictionary.config.js
const StyleDictionary = require('style-dictionary');

// è‡ªå®šä¹‰è½¬æ¢å™¨
StyleDictionary.registerTransform({
  name: 'size/tailwind',
  type: 'value',
  matcher: (token) => token.attributes.category === 'size',
  transformer: (token) => {
    const value = parseFloat(token.value);
    if (value === 0) return '0';
    return `${value / 16}rem`;
  }
});

// è‡ªå®šä¹‰æ ¼å¼åŒ–å™¨
StyleDictionary.registerFormat({
  name: 'css/tailwind-utilities',
  formatter: (dictionary) => {
    return dictionary.allTokens.map(token => {
      const cssVar = `--${token.name.replace(/\./g, '-')}`;
      return `  ${cssVar}: ${token.value};`;
    }).join('\n');
  }
});

module.exports = {
  source: ['tokens/**/*.json'],
  platforms: {
    css: {
      transformGroup: 'css',
      buildPath: 'src/styles/',
      files: [{
        destination: 'tokens.css',
        format: 'css/variables',
        options: {
          outputReferences: true
        }
      }]
    },
    tailwind: {
      transformGroup: 'css',
      buildPath: 'src/styles/',
      files: [{
        destination: 'tailwind-tokens.js',
        format: 'javascript/module-flat'
      }]
    }
  }
};
```

---

## ğŸ§© ç»„ä»¶ç³»ç»Ÿå®ç°

### åŸºç¡€ç»„ä»¶æ¶æ„
```tsx
// src/components/ui/button/button.tsx
import * as React from 'react';
import { Slot } from '@radix-ui/react-slot';
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '@/lib/utils';

const buttonVariants = cva(
  // åŸºç¡€æ ·å¼ - ç›´æ¥æ˜ å°„Design Tokens
  [
    'inline-flex items-center justify-center whitespace-nowrap',
    'rounded-md text-sm font-medium transition-colors',
    'focus-visible:outline-none focus-visible:ring-2',
    'focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',
  ],
  {
    variants: {
      variant: {
        // ä¸»è¦æŒ‰é’® - ä½¿ç”¨å“ç‰Œè‰²å½©ä»¤ç‰Œ
        primary: [
          'bg-gradient-to-r from-brand-primary to-brand-accent',
          'text-white hover:from-brand-primary/90 hover:to-brand-accent/90',
          'shadow-brand hover:shadow-brand-lg',
          'transform hover:-translate-y-0.5 active:translate-y-0',
        ],
        // æ¬¡è¦æŒ‰é’® - ä½¿ç”¨è¯­ä¹‰åŒ–ä»¤ç‰Œ
        secondary: [
          'bg-background-glass border border-semantic-border-primary',
          'text-text-primary hover:bg-background-overlay',
          'backdrop-blur-lg',
        ],
        // å¹½çµæŒ‰é’®
        ghost: [
          'text-brand-primary hover:bg-brand-primary/10',
          'hover:text-brand-primary-600',
        ],
        // å±é™©æŒ‰é’®
        destructive: [
          'bg-red-500 text-white hover:bg-red-600',
          'shadow-sm hover:shadow-md',
        ],
      },
      size: {
        sm: 'h-8 px-3 text-xs',
        md: 'h-10 px-4 py-2',
        lg: 'h-12 px-6 text-base',
        xl: 'h-14 px-8 text-lg',
      },
    },
    defaultVariants: {
      variant: 'primary',
      size: 'md',
    },
  }
);

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean;
  loading?: boolean;
  leftIcon?: React.ReactNode;
  rightIcon?: React.ReactNode;
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ 
    className, 
    variant, 
    size, 
    asChild = false, 
    loading = false,
    leftIcon,
    rightIcon,
    children,
    disabled,
    ...props 
  }, ref) => {
    const Comp = asChild ? Slot : 'button';
    
    return (
      <Comp
        className={cn(buttonVariants({ variant, size }), className)}
        ref={ref}
        disabled={disabled || loading}
        {...props}
      >
        {loading && (
          <svg 
            className="mr-2 h-4 w-4 animate-spin" 
            xmlns="http://www.w3.org/2000/svg" 
            fill="none" 
            viewBox="0 0 24 24"
          >
            <circle 
              className="opacity-25" 
              cx="12" 
              cy="12" 
              r="10" 
              stroke="currentColor" 
              strokeWidth="4"
            />
            <path 
              className="opacity-75" 
              fill="currentColor" 
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            />
          </svg>
        )}
        {leftIcon && !loading && (
          <span className="mr-2">{leftIcon}</span>
        )}
        {children}
        {rightIcon && (
          <span className="ml-2">{rightIcon}</span>
        )}
      </Comp>
    );
  }
);

Button.displayName = 'Button';

export { Button, buttonVariants };
```

### å¤åˆç»„ä»¶å®ç°
```tsx
// src/components/ui/product-card/product-card.tsx
import React from 'react';
import { Card, CardContent, CardFooter, CardHeader } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
import { Star, Heart, Download, Play, Eye } from 'lucide-react';
import { cn } from '@/lib/utils';
import { motion } from 'framer-motion';

interface ProductCardProps {
  product: {
    id: string;
    name: string;
    subtitle: string;
    description: string;
    type: 'workforce' | 'expert_module' | 'market_report';
    vendor: {
      name: string;
      avatar: string;
    };
    pricing: {
      model: 'free' | 'trial' | 'one_time' | 'subscription';
      price: number;
      unit?: string;
    };
    stats: {
      likes: number;
      installs: number;
      runs: number;
      rating: number;
    };
    tags: string[];
    matchScore?: number;
  };
  variant?: 'market' | 'recommendation';
  onTry?: () => void;
  onPurchase?: () => void;
  onAddToSpecs?: () => void;
}

// äº§å“ç±»å‹æ ·å¼æ˜ å°„ - ä½¿ç”¨Design Tokens
const typeStyles = {
  workforce: {
    border: 'border-brand-primary/20',
    background: 'bg-brand-primary/5',
    badge: 'bg-brand-primary/20 text-brand-primary border-brand-primary/40',
    label: 'AIåŠ³åŠ¨åŠ›'
  },
  expert_module: {
    border: 'border-brand-accent/20',
    background: 'bg-brand-accent/5',
    badge: 'bg-brand-accent/20 text-brand-accent border-brand-accent/40',
    label: 'ä¸“å®¶æ¨¡å—'
  },
  market_report: {
    border: 'border-brand-secondary/20',
    background: 'bg-brand-secondary/5',
    badge: 'bg-brand-secondary/20 text-brand-secondary border-brand-secondary/40',
    label: 'å¸‚åœºæŠ¥å‘Š'
  },
};

const ProductCard: React.FC<ProductCardProps> = ({
  product,
  variant = 'market',
  onTry,
  onPurchase,
  onAddToSpecs
}) => {
  const typeStyle = typeStyles[product.type];

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      whileHover={{ y: -4 }}
      transition={{ 
        duration: 0.2, 
        ease: [0.4, 0, 0.2, 1] // ä½¿ç”¨Design Tokençš„easing
      }}
    >
      <Card className={cn(
        'group relative overflow-hidden transition-all duration-300',
        'hover:shadow-brand border-2',
        typeStyle.border,
        typeStyle.background,
        variant === 'recommendation' && 'border-l-4 border-l-brand-primary'
      )}>
        {/* äº§å“ç±»å‹æ ‡è¯† */}
        <div className="absolute top-4 right-4 z-10">
          <Badge className={cn('text-xs font-medium border', typeStyle.badge)}>
            {typeStyle.label}
          </Badge>
        </div>

        <CardHeader className="pb-4">
          {/* ä¾›åº”å•†ä¿¡æ¯ */}
          <div className="flex items-center gap-2 mb-3">
            <Avatar className="w-6 h-6">
              <AvatarImage src={product.vendor.avatar} alt={product.vendor.name} />
              <AvatarFallback className="text-xs">
                {product.vendor.name.slice(0, 2)}
              </AvatarFallback>
            </Avatar>
            <span className="text-xs text-text-muted">{product.vendor.name}</span>
          </div>

          {/* äº§å“æ ‡é¢˜ */}
          <div>
            <h3 className="text-lg font-semibold text-text-primary mb-2 line-clamp-2">
              {product.name}
            </h3>
            <p className="text-sm text-text-secondary line-clamp-2">
              {product.subtitle}
            </p>
          </div>
        </CardHeader>

        <CardContent className="pb-4">
          {/* äº§å“æè¿° */}
          <p className="text-sm text-text-muted mb-4 line-clamp-3">
            {product.description}
          </p>

          {/* æ ‡ç­¾ */}
          <div className="flex flex-wrap gap-1.5 mb-4">
            {product.tags.slice(0, 3).map((tag, index) => (
              <Badge key={index} variant="outline" className="text-xs">
                {tag}
              </Badge>
            ))}
            {product.tags.length > 3 && (
              <Badge variant="outline" className="text-xs">
                +{product.tags.length - 3}
              </Badge>
            )}
          </div>

          {/* ç»Ÿè®¡ä¿¡æ¯ */}
          <div className="flex items-center justify-between text-xs text-text-muted mb-4">
            <div className="flex items-center gap-4">
              <div className="flex items-center gap-1">
                <Heart className="w-3 h-3" />
                <span>{product.stats.likes}</span>
              </div>
              <div className="flex items-center gap-1">
                <Download className="w-3 h-3" />
                <span>{product.stats.installs}</span>
              </div>
              <div className="flex items-center gap-1">
                <Play className="w-3 h-3" />
                <span>{product.stats.runs}</span>
              </div>
            </div>
            <div className="flex items-center gap-1">
              <Star className="w-3 h-3 fill-yellow-400 text-yellow-400" />
              <span>{product.stats.rating.toFixed(1)}</span>
            </div>
          </div>

          {/* åŒ¹é…åº¦ï¼ˆæ¨èå¡ç‰‡ä¸“ç”¨ï¼‰ */}
          {variant === 'recommendation' && product.matchScore && (
            <motion.div 
              className="flex items-center justify-between mb-4 p-2 bg-brand-primary/10 rounded-lg border border-brand-primary/20"
              initial={{ scale: 0.95 }}
              animate={{ scale: 1 }}
              transition={{ delay: 0.1 }}
            >
              <div className="flex items-center gap-2">
                <span className="text-lg font-bold bg-gradient-to-r from-brand-primary to-brand-accent bg-clip-text text-transparent">
                  {product.matchScore}%
                </span>
                <span className="text-xs text-text-muted">åŒ¹é…åº¦</span>
              </div>
              <span className="text-xs text-text-secondary">æ™ºèƒ½æ¨è</span>
            </motion.div>
          )}

          {/* å®šä»·ä¿¡æ¯ */}
          <div className="flex items-center justify-between">
            <div className="flex items-baseline gap-1">
              <span className="text-xl font-bold text-text-primary font-mono">
                {product.pricing.model === 'free' ? 'å…è´¹' : `Â¥${product.pricing.price}`}
              </span>
              {product.pricing.unit && (
                <span className="text-xs text-text-muted">/{product.pricing.unit}</span>
              )}
            </div>
            <Badge variant="outline" className="text-xs">
              {product.pricing.model === 'free' && 'å…è´¹'}
              {product.pricing.model === 'trial' && 'è¯•ç”¨'}
              {product.pricing.model === 'one_time' && 'ä¸€æ¬¡æ€§'}
              {product.pricing.model === 'subscription' && 'è®¢é˜…'}
            </Badge>
          </div>
        </CardContent>

        <CardFooter className="pt-0">
          <div className="flex gap-2 w-full">
            {variant === 'market' ? (
              <>
                <Button 
                  variant="ghost" 
                  size="sm" 
                  className="flex-1"
                  onClick={onTry}
                  leftIcon={<Eye className="w-4 h-4" />}
                >
                  è¯•ç”¨
                </Button>
                <Button 
                  variant="primary" 
                  size="sm" 
                  className="flex-2"
                  onClick={onPurchase}
                >
                  ç«‹å³è´­ä¹°
                </Button>
              </>
            ) : (
              <>
                <Button 
                  variant="secondary" 
                  size="sm" 
                  className="flex-1"
                  onClick={onTry}
                >
                  è¯•ç”¨
                </Button>
                <Button 
                  variant="ghost" 
                  size="sm" 
                  className="flex-1"
                  onClick={() => {/* æŸ¥çœ‹è¯¦æƒ… */}}
                >
                  è¯¦æƒ…
                </Button>
                <Button 
                  variant="primary" 
                  size="sm" 
                  className="flex-2"
                  onClick={onAddToSpecs}
                >
                  æ·»åŠ åˆ°æ–¹æ¡ˆ
                </Button>
              </>
            )}
          </div>
        </CardFooter>
      </Card>
    </motion.div>
  );
};

export default ProductCard;
```

---

## ğŸ“š Storybooké›†æˆé…ç½®

### Storybookä¸»é…ç½®
```typescript
// .storybook/main.ts
import type { StorybookConfig } from '@storybook/nextjs';

const config: StorybookConfig = {
  stories: [
    '../src/**/*.stories.@(js|jsx|ts|tsx|mdx)',
    '../src/**/*.story.@(js|jsx|ts|tsx|mdx)',
  ],
  addons: [
    '@storybook/addon-essentials',
    '@storybook/addon-interactions',
    '@storybook/addon-a11y',
    '@storybook/addon-design-tokens',
    '@chromatic-com/storybook',
  ],
  framework: {
    name: '@storybook/nextjs',
    options: {},
  },
  docs: {
    autodocs: 'tag',
  },
  typescript: {
    check: false,
    reactDocgen: 'react-docgen-typescript',
    reactDocgenTypescriptOptions: {
      shouldExtractLiteralValuesFromEnum: true,
      propFilter: (prop) => (prop.parent ? !/node_modules/.test(prop.parent.fileName) : true),
    },
  },
};

export default config;
```

### ç»„ä»¶Storyç¤ºä¾‹
```typescript
// src/components/ui/button/button.stories.tsx
import type { Meta, StoryObj } from '@storybook/react';
import { fn } from '@storybook/test';
import { Button } from './button';
import { Heart, Download, Star } from 'lucide-react';

const meta = {
  title: 'UI/Button',
  component: Button,
  parameters: {
    layout: 'centered',
    docs: {
      description: {
        component: 'æŒ‰é’®ç»„ä»¶åŸºäºDesign Tokensæ„å»ºï¼Œæ”¯æŒå¤šç§å˜ä½“å’Œå°ºå¯¸ã€‚æ‰€æœ‰æ ·å¼éƒ½ä¸Figmaè®¾è®¡ç³»ç»Ÿä¿æŒä¸€è‡´ã€‚',
      },
    },
  },
  tags: ['autodocs'],
  argTypes: {
    variant: {
      control: { type: 'select' },
      options: ['primary', 'secondary', 'ghost', 'destructive'],
      description: 'æŒ‰é’®å˜ä½“ï¼Œå¯¹åº”ä¸åŒçš„ä½¿ç”¨åœºæ™¯',
    },
    size: {
      control: { type: 'select' },
      options: ['sm', 'md', 'lg', 'xl'],
      description: 'æŒ‰é’®å°ºå¯¸',
    },
    loading: {
      control: 'boolean',
      description: 'åŠ è½½çŠ¶æ€',
    },
    disabled: {
      control: 'boolean',
      description: 'ç¦ç”¨çŠ¶æ€',
    },
  },
  args: { onClick: fn() },
} satisfies Meta<typeof Button>;

export default meta;
type Story = StoryObj<typeof meta>;

// åŸºç¡€ç”¨æ³•
export const Default: Story = {
  args: {
    children: 'æŒ‰é’®',
  },
};

// å˜ä½“å±•ç¤º
export const Variants: Story = {
  render: () => (
    <div className="flex gap-4 flex-wrap">
      <Button variant="primary">ä¸»è¦æŒ‰é’®</Button>
      <Button variant="secondary">æ¬¡è¦æŒ‰é’®</Button>
      <Button variant="ghost">å¹½çµæŒ‰é’®</Button>
      <Button variant="destructive">å±é™©æŒ‰é’®</Button>
    </div>
  ),
};

// å°ºå¯¸å±•ç¤º
export const Sizes: Story = {
  render: () => (
    <div className="flex gap-4 items-center">
      <Button size="sm">å°å°ºå¯¸</Button>
      <Button size="md">ä¸­å°ºå¯¸</Button>
      <Button size="lg">å¤§å°ºå¯¸</Button>
      <Button size="xl">è¶…å¤§å°ºå¯¸</Button>
    </div>
  ),
};

// å¸¦å›¾æ ‡
export const WithIcons: Story = {
  render: () => (
    <div className="flex gap-4 flex-wrap">
      <Button leftIcon={<Heart className="w-4 h-4" />}>
        æ”¶è—
      </Button>
      <Button rightIcon={<Download className="w-4 h-4" />}>
        ä¸‹è½½
      </Button>
      <Button leftIcon={<Star className="w-4 h-4" />} rightIcon={<Download className="w-4 h-4" />}>
        è¯„ä»·å¹¶ä¸‹è½½
      </Button>
    </div>
  ),
};

// çŠ¶æ€å±•ç¤º
export const States: Story = {
  render: () => (
    <div className="flex gap-4 flex-wrap">
      <Button>æ­£å¸¸çŠ¶æ€</Button>
      <Button loading>åŠ è½½ä¸­</Button>
      <Button disabled>ç¦ç”¨çŠ¶æ€</Button>
    </div>
  ),
};

// äº§å“åœºæ™¯åº”ç”¨
export const ProductScenarios: Story = {
  render: () => (
    <div className="flex gap-4 flex-col max-w-md">
      <div className="p-4 bg-background-glass rounded-lg border border-semantic-border-primary">
        <h3 className="font-semibold mb-2">äº§å“å¡ç‰‡æ“ä½œ</h3>
        <div className="flex gap-2">
          <Button variant="ghost" size="sm">è¯•ç”¨</Button>
          <Button variant="primary" size="sm">ç«‹å³è´­ä¹°</Button>
        </div>
      </div>
      
      <div className="p-4 bg-background-glass rounded-lg border border-semantic-border-primary">
        <h3 className="font-semibold mb-2">Chaté¡µé¢æ“ä½œ</h3>
        <div className="flex gap-2">
          <Button variant="secondary" size="sm">æŸ¥çœ‹è¯¦æƒ…</Button>
          <Button variant="primary" size="sm">æ·»åŠ åˆ°æ–¹æ¡ˆ</Button>
        </div>
      </div>
    </div>
  ),
  parameters: {
    docs: {
      description: {
        story: 'å±•ç¤ºæŒ‰é’®åœ¨å®é™…äº§å“åœºæ™¯ä¸­çš„åº”ç”¨ï¼Œç¡®ä¿ä¸è®¾è®¡ç³»ç»Ÿçš„ä¸€è‡´æ€§ã€‚',
      },
    },
  },
};
```

---

## ğŸ”„ è‡ªåŠ¨åŒ–æµ‹è¯•ä¸è´¨é‡ä¿è¯

### Visual Regression Testing
```typescript
// .circleci/config.yml (æˆ–GitHub Actions)
version: 2.1

jobs:
  chromatic-deployment:
    docker:
      - image: cimg/node:18.17
    working_directory: ~/repo
    steps:
      - checkout
      - restore_cache:
          keys:
            - v1-dependencies-{{ checksum "package.json" }}
      - run: npm ci
      - run:
          name: Run Chromatic
          command: |
            npx chromatic --project-token=$CHROMATIC_PROJECT_TOKEN \
                         --build-script-name=build-storybook \
                         --exit-zero-on-changes
      - store_artifacts:
          path: storybook-static

workflows:
  ui-tests:
    jobs:
      - chromatic-deployment:
          filters:
            branches:
              only:
                - main
                - develop
```

### Design TokenåŒæ­¥éªŒè¯
```javascript
// scripts/validate-tokens.js
const fs = require('fs');
const path = require('path');

// è¯»å–è®¾è®¡ä»¤ç‰Œ
const tokens = JSON.parse(fs.readFileSync('./tokens/cloudsway.json', 'utf8'));

// è¯»å–Tailwindé…ç½®
const tailwindConfig = require('./tailwind.config.js');

// éªŒè¯ä»¤ç‰ŒåŒæ­¥
function validateTokenSync() {
  const errors = [];
  
  // éªŒè¯é¢œè‰²ä»¤ç‰Œ
  const colorTokens = tokens.cloudsway.color.semantic;
  const tailwindColors = tailwindConfig.theme.extend.colors.cloudsway;
  
  Object.keys(colorTokens).forEach(category => {
    Object.keys(colorTokens[category]).forEach(key => {
      const tokenPath = `cloudsway.${category}.${key}`;
      const tailwindPath = `cloudsway-${category}-${key}`;
      
      if (!tailwindColors[category] || !tailwindColors[category][key]) {
        errors.push(`Missing Tailwind color: ${tailwindPath}`);
      }
    });
  });
  
  // éªŒè¯é—´è·ä»¤ç‰Œ
  const spacingTokens = tokens.cloudsway.spacing.scale;
  const tailwindSpacing = tailwindConfig.theme.extend.spacing;
  
  Object.keys(spacingTokens).forEach(key => {
    if (!tailwindSpacing[key]) {
      errors.push(`Missing Tailwind spacing: ${key}`);
    }
  });
  
  if (errors.length > 0) {
    console.error('Token synchronization errors:');
    errors.forEach(error => console.error(`  - ${error}`));
    process.exit(1);
  } else {
    console.log('âœ… All tokens are synchronized');
  }
}

validateTokenSync();
```

### ç»„ä»¶APIä¸€è‡´æ€§æµ‹è¯•
```typescript
// src/__tests__/component-api.test.tsx
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { Button } from '@/components/ui/button';
import { ProductCard } from '@/components/ui/product-card';

describe('Component API Consistency', () => {
  describe('Button Component', () => {
    it('should render all variants correctly', () => {
      const variants = ['primary', 'secondary', 'ghost', 'destructive'] as const;
      
      variants.forEach(variant => {
        render(<Button variant={variant}>Test Button</Button>);
        const button = screen.getByRole('button', { name: 'Test Button' });
        expect(button).toHaveClass(`btn-${variant}`);
      });
    });

    it('should handle loading state', () => {
      render(<Button loading>Loading Button</Button>);
      const button = screen.getByRole('button');
      expect(button).toBeDisabled();
      expect(screen.getByRole('img', { hidden: true })).toBeInTheDocument(); // spinner
    });

    it('should support keyboard navigation', async () => {
      const user = userEvent.setup();
      const handleClick = jest.fn();
      
      render(<Button onClick={handleClick}>Clickable Button</Button>);
      const button = screen.getByRole('button');
      
      await user.tab();
      expect(button).toHaveFocus();
      
      await user.keyboard('{Enter}');
      expect(handleClick).toHaveBeenCalledTimes(1);
    });
  });

  describe('ProductCard Component', () => {
    const mockProduct = {
      id: '1',
      name: 'Test Product',
      subtitle: 'Test Subtitle',
      description: 'Test Description',
      type: 'workforce' as const,
      vendor: { name: 'Test Vendor', avatar: '/test-avatar.jpg' },
      pricing: { model: 'free' as const, price: 0 },
      stats: { likes: 10, installs: 100, runs: 1000, rating: 4.5 },
      tags: ['test', 'ai'],
    };

    it('should render product information correctly', () => {
      render(<ProductCard product={mockProduct} />);
      
      expect(screen.getByText('Test Product')).toBeInTheDocument();
      expect(screen.getByText('Test Subtitle')).toBeInTheDocument();
      expect(screen.getByText('Test Vendor')).toBeInTheDocument();
      expect(screen.getByText('AIåŠ³åŠ¨åŠ›')).toBeInTheDocument();
    });

    it('should handle different product types', () => {
      const types = ['workforce', 'expert_module', 'market_report'] as const;
      const labels = ['AIåŠ³åŠ¨åŠ›', 'ä¸“å®¶æ¨¡å—', 'å¸‚åœºæŠ¥å‘Š'];
      
      types.forEach((type, index) => {
        const product = { ...mockProduct, type };
        render(<ProductCard product={product} />);
        expect(screen.getByText(labels[index])).toBeInTheDocument();
      });
    });
  });
});
```

---

## ğŸš€ CI/CDé›†æˆæµç¨‹

### GitHub Actionså·¥ä½œæµ
```yaml
# .github/workflows/design-system.yml
name: Design System CI/CD

on:
  push:
    branches: [ main, develop ]
    paths: 
      - 'src/components/**'
      - 'tokens/**'
      - 'src/styles/**'
  pull_request:
    branches: [ main ]
    paths:
      - 'src/components/**'
      - 'tokens/**'
      - 'src/styles/**'

jobs:
  validate-design-tokens:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build design tokens
        run: npm run build:tokens
      
      - name: Validate token synchronization
        run: node scripts/validate-tokens.js

  test-components:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run component tests
        run: npm run test:components
      
      - name: Run accessibility tests
        run: npm run test:a11y

  visual-regression:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      - uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build Storybook
        run: npm run build-storybook
      
      - name: Run Chromatic
        uses: chromaui/action@v1
        with:
          projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}
          buildScriptName: 'build-storybook'
          exitZeroOnChanges: true

  build-design-system:
    needs: [validate-design-tokens, test-components]
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build design system package
        run: npm run build:design-system
      
      - name: Publish to npm
        if: github.event_name == 'push'
        run: |
          echo "//registry.npmjs.org/:_authToken=${{ secrets.NPM_TOKEN }}" > ~/.npmrc
          npm publish --access public
        env:
          NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
```

### è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
```bash
#!/bin/bash
# scripts/deploy-design-system.sh

set -e

echo "ğŸš€ Starting design system deployment..."

# 1. éªŒè¯è®¾è®¡ä»¤ç‰Œ
echo "ğŸ“Š Validating design tokens..."
node scripts/validate-tokens.js

# 2. æ„å»ºè®¾è®¡ä»¤ç‰Œ
echo "ğŸ¨ Building design tokens..."
npm run build:tokens

# 3. è¿è¡Œæµ‹è¯•
echo "ğŸ§ª Running tests..."
npm run test:components
npm run test:a11y

# 4. æ„å»ºStorybook
echo "ğŸ“š Building Storybook..."
npm run build-storybook

# 5. è¿è¡Œè§†è§‰å›å½’æµ‹è¯•
echo "ğŸ‘€ Running visual regression tests..."
npx chromatic --exit-zero-on-changes

# 6. æ„å»ºè®¾è®¡ç³»ç»ŸåŒ…
echo "ğŸ“¦ Building design system package..."
npm run build:design-system

# 7. ç”Ÿæˆå˜æ›´æ—¥å¿—
echo "ğŸ“ Generating changelog..."
npm run changelog

echo "âœ… Design system deployment completed!"
```

---

## ğŸ“Š è®¾è®¡ç³»ç»Ÿç›‘æ§ä¸æŒ‡æ ‡

### ä½¿ç”¨æƒ…å†µè¿½è¸ª
```typescript
// src/lib/design-system-analytics.ts
interface ComponentUsageEvent {
  component: string;
  variant?: string;
  props: Record<string, any>;
  timestamp: number;
  userId?: string;
  sessionId: string;
}

class DesignSystemAnalytics {
  private events: ComponentUsageEvent[] = [];

  trackComponentUsage(
    component: string, 
    variant?: string, 
    props: Record<string, any> = {}
  ) {
    if (process.env.NODE_ENV === 'production') {
      const event: ComponentUsageEvent = {
        component,
        variant,
        props: this.sanitizeProps(props),
        timestamp: Date.now(),
        sessionId: this.getSessionId(),
      };

      this.events.push(event);
      this.sendToAnalytics(event);
    }
  }

  private sanitizeProps(props: Record<string, any>) {
    // ç§»é™¤æ•æ„Ÿä¿¡æ¯ï¼Œåªä¿ç•™è®¾è®¡ç›¸å…³çš„å±æ€§
    const allowedProps = ['size', 'variant', 'loading', 'disabled'];
    return Object.keys(props)
      .filter(key => allowedProps.includes(key))
      .reduce((obj, key) => {
        obj[key] = props[key];
        return obj;
      }, {} as Record<string, any>);
  }

  private sendToAnalytics(event: ComponentUsageEvent) {
    // å‘é€åˆ°åˆ†æå¹³å°
    if (window.gtag) {
      window.gtag('event', 'design_system_component_usage', {
        component: event.component,
        variant: event.variant,
        custom_parameters: event.props,
      });
    }
  }

  getUsageStats() {
    // è¿”å›ç»„ä»¶ä½¿ç”¨ç»Ÿè®¡
    const stats = this.events.reduce((acc, event) => {
      const key = `${event.component}:${event.variant || 'default'}`;
      acc[key] = (acc[key] || 0) + 1;
      return acc;
    }, {} as Record<string, number>);

    return Object.entries(stats)
      .sort(([,a], [,b]) => b - a)
      .slice(0, 10); // è¿”å›å‰10ä¸ªæœ€å¸¸ç”¨çš„ç»„ä»¶
  }

  private getSessionId(): string {
    // è·å–ä¼šè¯IDçš„é€»è¾‘
    return sessionStorage.getItem('sessionId') || 'anonymous';
  }
}

export const designSystemAnalytics = new DesignSystemAnalytics();

// React Hook for component usage tracking
export function useComponentTracking(componentName: string) {
  return {
    trackUsage: (variant?: string, props?: Record<string, any>) => {
      designSystemAnalytics.trackComponentUsage(componentName, variant, props);
    }
  };
}
```

### æ€§èƒ½ç›‘æ§
```typescript
// src/lib/design-system-performance.ts
interface PerformanceMetric {
  component: string;
  renderTime: number;
  timestamp: number;
}

class DesignSystemPerformance {
  private metrics: PerformanceMetric[] = [];

  measureComponentRender<T>(
    componentName: string,
    renderFunction: () => T
  ): T {
    const startTime = performance.now();
    const result = renderFunction();
    const endTime = performance.now();

    this.metrics.push({
      component: componentName,
      renderTime: endTime - startTime,
      timestamp: Date.now(),
    });

    // å¦‚æœæ¸²æŸ“æ—¶é—´è¶…è¿‡é˜ˆå€¼ï¼Œå‘å‡ºè­¦å‘Š
    const renderTime = endTime - startTime;
    if (renderTime > 16) { // å¤§äºä¸€å¸§çš„æ—¶é—´
      console.warn(`ğŸŒ Slow component render: ${componentName} took ${renderTime.toFixed(2)}ms`);
    }

    return result;
  }

  getPerformanceReport() {
    const componentStats = this.metrics.reduce((acc, metric) => {
      if (!acc[metric.component]) {
        acc[metric.component] = {
          count: 0,
          totalTime: 0,
          avgTime: 0,
          maxTime: 0,
        };
      }

      const stats = acc[metric.component];
      stats.count++;
      stats.totalTime += metric.renderTime;
      stats.avgTime = stats.totalTime / stats.count;
      stats.maxTime = Math.max(stats.maxTime, metric.renderTime);

      return acc;
    }, {} as Record<string, any>);

    return Object.entries(componentStats)
      .map(([component, stats]) => ({ component, ...stats }))
      .sort((a, b) => b.avgTime - a.avgTime);
  }
}

export const designSystemPerformance = new DesignSystemPerformance();
```

---

## ğŸ“‹ è®¾è®¡ç³»ç»Ÿç»´æŠ¤æ£€æŸ¥æ¸…å•

### æ—¥å¸¸ç»´æŠ¤ä»»åŠ¡
```yaml
æ¯æ—¥æ£€æŸ¥:
  - [ ] ç›‘æ§ç»„ä»¶ä½¿ç”¨æƒ…å†µå’Œæ€§èƒ½æŒ‡æ ‡
  - [ ] æ£€æŸ¥Chromaticè§†è§‰å›å½’æµ‹è¯•ç»“æœ
  - [ ] å¤„ç†è®¾è®¡ç³»ç»Ÿç›¸å…³çš„GitHub Issues
  - [ ] åŒæ­¥Figmaè®¾è®¡æ–‡ä»¶æ›´æ–°

æ¯å‘¨ä»»åŠ¡:
  - [ ] å®¡æŸ¥è®¾è®¡ä»¤ç‰ŒåŒæ­¥çŠ¶æ€
  - [ ] æ›´æ–°ç»„ä»¶æ–‡æ¡£å’Œç¤ºä¾‹
  - [ ] è¿è¡Œå®Œæ•´çš„å¯è®¿é—®æ€§å®¡è®¡
  - [ ] åˆ†æç»„ä»¶ä½¿ç”¨æ•°æ®

æ¯æœˆä»»åŠ¡:
  - [ ] è¯„ä¼°è®¾è®¡ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
  - [ ] è®¡åˆ’ä¸‹ä¸ªæœˆçš„æ”¹è¿›å’Œæ–°åŠŸèƒ½
  - [ ] æ›´æ–°è®¾è®¡ç³»ç»Ÿç‰ˆæœ¬å’Œå˜æ›´æ—¥å¿—
  - [ ] å›¢é˜ŸåŸ¹è®­å’Œæœ€ä½³å®è·µåˆ†äº«

å­£åº¦ä»»åŠ¡:
  - [ ] å…¨é¢çš„ç”¨æˆ·ä½“éªŒå®¡æŸ¥
  - [ ] è®¾è®¡ç³»ç»Ÿæ¶æ„ä¼˜åŒ–
  - [ ] ç¬¬ä¸‰æ–¹åº“ç‰ˆæœ¬æ›´æ–°
  - [ ] è®¾è®¡ç³»ç»Ÿå½±å“åŠ›è¯„ä¼°
```

### è´¨é‡ä¿è¯æµç¨‹
```yaml
ä»£ç å®¡æŸ¥æ£€æŸ¥æ¸…å•:
  è®¾è®¡ä¸€è‡´æ€§:
    - [ ] ä½¿ç”¨æ­£ç¡®çš„Design Tokens
    - [ ] éµå¾ªç»„ä»¶APIè§„èŒƒ
    - [ ] ç¬¦åˆè§†è§‰è®¾è®¡æŒ‡å—

  å¯è®¿é—®æ€§:
    - [ ] ARIAå±æ€§æ­£ç¡®ä½¿ç”¨
    - [ ] é”®ç›˜å¯¼èˆªæ”¯æŒ
    - [ ] é¢œè‰²å¯¹æ¯”åº¦è¾¾æ ‡

  æ€§èƒ½:
    - [ ] ç»„ä»¶æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–
    - [ ] ä»£ç åˆ†å‰²åˆç†
    - [ ] ä¾èµ–åŒ…å¤§å°æ§åˆ¶

  æµ‹è¯•è¦†ç›–:
    - [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡
    - [ ] è§†è§‰å›å½’æµ‹è¯•
    - [ ] äº¤äº’æµ‹è¯•å®Œæ•´

å‘å¸ƒå‰æ£€æŸ¥:
  - [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
  - [ ] æ–‡æ¡£æ›´æ–°å®Œæ•´
  - [ ] å˜æ›´æ—¥å¿—å‡†ç¡®
  - [ ] ç‰ˆæœ¬å·ç¬¦åˆè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ
```

---

## ğŸ¯ æ€»ç»“ä¸å±•æœ›

### é›†æˆæˆæœ
é€šè¿‡å»ºç«‹å®Œæ•´çš„è®¾è®¡ç³»ç»Ÿä¸æŠ€æœ¯å®ç°é›†æˆæ¡†æ¶ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š

1. **è®¾è®¡ä¸€è‡´æ€§ä¿è¯**: Design Tokensç¡®ä¿è®¾è®¡ä¸ä»£ç çš„å®Œå…¨åŒæ­¥
2. **å¼€å‘æ•ˆç‡æå‡**: æ ‡å‡†åŒ–ç»„ä»¶å‡å°‘é‡å¤å¼€å‘å·¥ä½œ
3. **è´¨é‡è‡ªåŠ¨ä¿éšœ**: è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒCI/CDæµç¨‹ç¡®ä¿ä»£ç è´¨é‡
4. **å¯ç»´æŠ¤æ€§å¢å¼º**: å®Œæ•´çš„æ–‡æ¡£å’Œç›‘æ§ä½“ç³»æ”¯æŒé•¿æœŸç»´æŠ¤

### æŒç»­æ”¹è¿›è®¡åˆ’
1. **æ™ºèƒ½åŒ–è®¾è®¡ç³»ç»Ÿ**: åŸºäºä½¿ç”¨æ•°æ®çš„è‡ªåŠ¨ä¼˜åŒ–å»ºè®®
2. **AIè¾…åŠ©è®¾è®¡**: è‡ªåŠ¨ç”Ÿæˆç»„ä»¶å˜ä½“å’Œæ ·å¼
3. **è·¨å¹³å°æ‰©å±•**: æ”¯æŒç§»åŠ¨ç«¯å’Œå…¶ä»–å¹³å°çš„è®¾è®¡ç³»ç»Ÿ
4. **ç¤¾åŒºç”Ÿæ€**: å»ºç«‹å¼€æºç¤¾åŒºå’Œæ’ä»¶ç”Ÿæ€ç³»ç»Ÿ

---

**æ–‡æ¡£ç»´æŠ¤**: è®¾è®¡ç³»ç»Ÿå›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025å¹´8æœˆ12æ—¥  
**ç‰ˆæœ¬æ§åˆ¶**: v2.0.0 - è®¾è®¡ç³»ç»Ÿé›†æˆæŒ‡å—ç‰ˆ  
**æ ¸å¿ƒä»·å€¼**: å»ºç«‹è®¾è®¡ä¸æŠ€æœ¯çš„æ— ç¼é›†æˆï¼Œç¡®ä¿æ™ºé“¾å¹³å°v2è®¾è®¡ç³»ç»Ÿçš„å¯æŒç»­å‘å±•