# <!-- Powered by BMAD™ Core -->
workflow:
  id: research-intensive
  name: Research-Intensive Intelligence Gathering & Analysis
  description: >-
    深度研究密集型项目的智能信息收集与分析工作流。专门处理广泛信息收集、多源验证、
    竞争情报分析和战略洞察综合。通过多轮深度研究，让知识在搜索和验证中自然增长和完善。
    
    **核心理念**: 并行搜索驱动的知识成长模式。每个研究轮次内部包含无数个并行循环：
    信息发现→多源验证→深度挖掘→交叉验证→模式识别→洞察综合。
    这种高并发模式让研究在多个维度同时深化，在信息综合中实现智慧跃迁。
  type: research
  project_types:
    - market-research
    - competitive-analysis
    - technology-assessment
    - industry-intelligence
    - strategic-planning
    - investment-analysis
    - regulatory-research
    - trend-forecasting

  sequence:
    - agent: search-specialist
      phase: "Concurrent Initial Discovery"
      creates: search-strategy.md
      uses: 
        - WebSearch (concurrent broad discovery)
        - Tavily Search (parallel AI-optimized queries)
        - Media Crawler (simultaneous sentiment scanning)  
        - GitHub Search (parallel technical context)
      strategy: "concurrent_exploratory_scanning"
      concurrency_level: "medium (4 parallel streams)"
      methodology: "concurrent_exploratory_intelligence"
      
      并行探索型情报收集:
        multi_dimensional_scanning:
          - 在多个信息渠道中同时进行全景扫描
          - 实时聚合和综合探索性查询结果
          - 构建动态关键词群集和多源优先级矩阵
        
        intelligent_gap_identification:
          - 智能识别信息空白和知识盲区
          - 实时评估信息覆盖度和深度
          - 动态调整搜索策略和重点领域
        
        strategy_matrix_creation:
          - 创建综合性搜索策略矩阵和执行计划
          - 建立多源信息验证和交叉检验机制
          - 为后续深度挖掘奠定坚实的信息基础
      
      notes: "阶段1：跨多个渠道的并行全景扫描。并发执行探索性查询，实时结果聚合。创建综合搜索策略矩阵，包含动态关键词群集、多源优先级和智能空白识别。"

    - agent: search-specialist  
      phase: "Concurrent Core Intelligence Gathering"
      creates: core-findings.md
      requires: search-strategy.md
      uses:
        - WebSearch (parallel targeted queries)
        - Tavily Search (concurrent expert mining)
        - Jina Reader (simultaneous document analysis)
        - GitHub Search (parallel technical validation)
        - WebFetch (concurrent deep source analysis)
      strategy: "concurrent_targeted_deep_dive"
      concurrency_level: "high (6 parallel streams)"
      optimization: "real-time quality scoring and deduplication"
      methodology: "high_performance_targeted_intelligence"
      
      高性能目标式情报收集:
        concurrent_strategy_execution:
          - 高性能并发执行核心搜索策略和目标挖掘
          - 在所有渠道中并行部署布尔运算符和时间过滤
          - 实时应用三源验证规则和自动化可信度评估
        
        quality_optimization_engine:
          - 动态搜索质量指标和性能优化系统
          - 实时质量评分和去重复化处理
          - 智能调整搜索参数和策略权重
        
        verification_automation:
          - 自动化多源交叉验证和信息一致性检查
          - 智能识别和标记相互矛盾的信息源
          - 建立动态的信息可信度和权威性评估
      
      notes: "阶段2：核心搜索策略的高性能并发执行。在所有渠道中并行部署布尔运算符、特定站点搜索和时间过滤。实时应用三源验证规则和自动化可信度评估。动态搜索质量指标和性能优化。"

    - decision_point: information_value_assessment
      agent: search-specialist
      action: evaluate_findings_quality
      creates: findings-assessment.md
      requires: core-findings.md
      criteria:
        - information_completeness: ">= 70%"
        - source_credibility: ">= 8/10"
        - data_freshness: "<= 6 months"
        - cross_verification: ">= 3 sources"
      methodology: "intelligent_information_value_assessment"
      
      智能信息价值评估:
        quality_threshold_analysis:
          - 系统评估信息完整性、可信度和旰鲜度
          - 动态调整质量阈值和验收标准
          - 基于任务重要性和紧急程度的智能决策
        
        gap_identification_engine:
          - 智能识别关键信息空白和知识盲区
          - 分析信息覆盖的均衡性和深度一致性
          - 评估现有信息对最终目标的支撑度
        
        decision_routing_logic:
          - 质量达标：直接进入竞争分析阶段
          - 质量不足：触发强化搜索和深度挖掘
          - 动态反馈和连续优化直到质量满足
      
      notes: "关键决策点：评估信息价值和空白。如果质量阈值未达标，触发强化搜索。如果达标，继续进行竞争分析。"

    - agent: search-critic-optimizer
      phase: "Search Strategy Critique & Optimization"
      creates: search-critique-report.md
      requires: core-findings.md
      analysis_focus:
        - methodology_effectiveness: "Evaluate search strategy performance"
        - result_quality_assessment: "Analyze information quality and gaps"
        - optimization_opportunities: "Identify specific improvement areas"
        - performance_metrics: "Assess efficiency and coverage metrics"
      notes: "Critical evaluation phase: Systematic analysis of search methodology and results quality. Identify optimization opportunities, gap analysis, and provide specific enhancement recommendations for improved performance."

    - conditional_reinforcement:
      condition: information_gaps_detected OR optimization_recommended
      agent: search-specialist
      phase: "Optimized Search Reinforcement"
      creates: reinforced-findings.md
      updates: core-findings.md
      requires: search-critique-report.md
      strategy: "critic_guided_intensification"
      enhancement_techniques:
        - critique_guided_optimization: "Apply specific recommendations from search-critic-optimizer"
        - concurrent_gap_targeting: "Parallel execution of gap-filling searches"
        - semantic_expansion: "Enhanced synonym and concept expansion"
        - temporal_broadening: "Strategic time range extension"
        - geographic_expansion: "Targeted international source inclusion"
        - expert_sourcing: "Focused academic and industry expert targeting"
        - alternative_platforms: "Expanded academic, industry, and government sources"
      optimization_features:
        - real_time_quality_monitoring: "Continuous quality assessment during reinforcement"
        - dynamic_strategy_adjustment: "Adaptive optimization based on intermediate results"
        - performance_benchmarking: "Compare against critic recommendations"
      notes: "Enhanced reinforcement phase: Implement search-critic-optimizer recommendations with concurrent gap-filling strategies. Apply critic-guided query optimization and expand source diversity using performance-optimized approaches. Continuous quality monitoring and strategy adjustment during execution."

    - agent: analyst
      phase: "Competitive Intelligence"
      creates: competitive-landscape.md
      requires: 
        - core-findings.md (or reinforced-findings.md)
        - findings-assessment.md
      uses:
        - competitor-analysis-tmpl.yaml
      strategy: "competitive_mapping"
      notes: "Phase 3: Deep competitive analysis. Map direct/indirect competitors, analyze positioning, pricing, capabilities. Use search findings to build comprehensive competitive intelligence matrix."

    - agent: search-specialist
      phase: "Trend & Signal Detection"
      creates: trends-analysis.md
      requires: competitive-landscape.md
      strategy: "pattern_recognition"
      techniques:
        - temporal_pattern_analysis: "Identify trends over time"
        - cross_correlation: "Find relationships between data points"
        - weak_signal_detection: "Identify emerging patterns"
        - sentiment_analysis: "Assess market sentiment shifts"
      notes: "Phase 4: Advanced trend analysis. Use AI-enhanced pattern recognition to identify emerging trends, weak signals, and correlation patterns across gathered intelligence."

    - agent: analyst
      phase: "Strategic Synthesis"
      creates: strategic-insights.md
      requires:
        - trends-analysis.md
        - competitive-landscape.md
        - core-findings.md
      uses:
        - market-research-tmpl.yaml
      notes: "Phase 5: Synthesize all research into strategic insights. Identify opportunities, threats, and strategic implications. Create actionable intelligence summary with confidence levels and recommended actions."

    - quality_gate: research_validation
      agent: analyst
      action: cross_validate_findings
      creates: validation-report.md
      requires: strategic-insights.md
      validation_criteria:
        - source_triangulation: "All major findings verified by 3+ independent sources"
        - temporal_consistency: "Trends validated across multiple time periods"
        - expert_consensus: "Key insights supported by industry experts"
        - data_quality_score: ">= 8.5/10"
      notes: "Critical quality gate: Comprehensive validation of all research findings. Apply rigorous fact-checking and source verification. Flag any findings with insufficient verification."

    - conditional_iteration:
      condition: validation_gaps_found
      action: return_to_reinforcement
      notes: "If validation identifies gaps, return to search reinforcement phase with specific gap targeting. Continue until validation criteria are met."

    - agent: pm
      phase: "Intelligence Packaging"
      creates: research-deliverable.md
      requires: 
        - strategic-insights.md
        - validation-report.md
      uses:
        - project-brief-tmpl.yaml (adapted for research)
      notes: "Phase 6: Package intelligence into executive-ready deliverable. Include executive summary, key findings, strategic recommendations, and implementation roadmap."

    - agent: po
      phase: "Research Validation & Sign-off"
      validates: research-deliverable.md
      uses: pm-checklist.md
      creates: final-research-report.md
      notes: "Final validation: Ensure research meets original objectives, quality standards, and stakeholder requirements. Approve for delivery or flag for additional work."

    - deliverable_export:
      action: export_research_artifacts
      creates:
        - docs/research-report.md
        - docs/competitive-analysis.md
        - docs/market-intelligence.md
        - docs/search-methodology.md
      notes: "Export all research artifacts to project docs/ folder for stakeholder access and future reference."

  # Enhanced Search Strategy Framework
  search_methodology:
    
    phase_1_exploratory:
      keywords_strategy:
        - primary_keywords: "Core subject matter terms"
        - secondary_keywords: "Industry-specific terminology"
        - semantic_variants: "Synonyms and related concepts"
        - geographic_modifiers: "Regional and cultural variations"
        - temporal_modifiers: "Time-specific search terms"
      
      source_prioritization:
        tier_1: "Authoritative sources (government, academic, industry leaders)"
        tier_2: "Professional sources (industry publications, expert opinions)"
        tier_3: "Community sources (forums, social media, reviews)"
      
      quality_filters:
        - publication_date: "Prioritize recent (< 12 months) unless historical analysis needed"
        - author_authority: "Verify expertise and credentials"
        - source_reputation: "Check domain authority and bias indicators"

    phase_2_targeted:
      advanced_operators:
        - boolean_logic: "AND, OR, NOT for precision"
        - exact_phrases: "Quotation marks for specific terms"
        - site_specific: "site:domain.com for targeted sources"
        - file_types: "filetype:pdf for research papers"
        - date_ranges: "after:2024 for recent information"
      
      verification_protocol:
        - three_source_rule: "Minimum 3 independent sources for any major claim"
        - primary_source_preference: "Prioritize original research over summaries"
        - bias_triangulation: "Include sources with different perspectives"

    phase_3_reinforcement:
      gap_analysis:
        - information_mapping: "Chart what is known vs unknown"
        - source_diversity_check: "Ensure variety in source types"
        - temporal_coverage: "Verify historical and current information"
        - geographic_coverage: "Include global and local perspectives"
      
      intensification_techniques:
        - expert_identification: "Target industry thought leaders"
        - academic_expansion: "Include scholarly sources"
        - regulatory_sources: "Government and compliance information"
        - financial_intelligence: "Market data and financial analysis"

  # MCP Integration Points
  mcp_enhancements:
    web_search_optimization:
      - query_refinement: "AI-assisted query optimization"
      - result_ranking: "Intelligent relevance scoring"
      - duplicate_detection: "Cross-source duplicate identification"
      - trend_extraction: "Automated pattern recognition"
    
    web_fetch_capabilities:
      - content_analysis: "Deep content extraction and analysis"
      - metadata_extraction: "Author, date, source credibility scoring"
      - link_graph_analysis: "Citation and reference mapping"
      - content_freshness: "Update frequency and recency scoring"

  # Information Value Assessment Framework
  value_assessment_criteria:
    
    information_quality:
      completeness: 
        excellent: ">= 90% of research questions answered"
        good: "70-89% coverage"
        needs_improvement: "< 70% coverage"
      
      credibility:
        excellent: ">= 9/10 average source credibility"
        good: "7-8.9/10 average"
        needs_improvement: "< 7/10 average"
      
      freshness:
        excellent: ">= 80% information < 6 months old"
        good: "60-79% recent information"
        needs_improvement: "< 60% recent information"
    
    strategic_value:
      actionability: "Can insights drive decision-making?"
      uniqueness: "Are insights differentiated from public knowledge?"
      impact_potential: "Could findings significantly affect strategy?"
      
  # Iterative Refinement Process
  refinement_triggers:
    - information_gap_ratio: "> 30% unanswered questions"
    - source_credibility_average: "< 7.5/10"
    - stakeholder_feedback: "Additional questions raised"
    - competitive_intelligence_gaps: "Missing key competitor information"
    - trend_analysis_uncertainty: "Conflicting or unclear trend signals"

  flow_diagram: |
    ```mermaid
    graph TD
        A[Start: Research Request] --> B[search-specialist: Initial Discovery]
        B --> C[search-specialist: Core Intelligence Gathering]
        C --> D{Information Value Assessment}
        D -->|Quality >= Threshold| E[analyst: Competitive Intelligence]
        D -->|Quality < Threshold| F[search-specialist: Reinforcement Search]
        F --> G[Re-assess Information Value]
        G -->|Improved| E
        G -->|Still Gaps| F
        
        E --> H[search-specialist: Trend & Signal Detection]
        H --> I[analyst: Strategic Synthesis]
        I --> J[Quality Gate: Research Validation]
        J -->|Validation Issues| K[Return to Reinforcement]
        J -->|Validation Passed| L[pm: Intelligence Packaging]
        K --> F
        
        L --> M[po: Research Validation & Sign-off]
        M -->|Issues Found| N[Return to Previous Phase]
        M -->|Approved| O[Export Research Artifacts]
        N --> L
        O --> P[Research Complete]

        B -.-> B1[MCP Web Search]
        C -.-> C1[MCP Advanced Search]
        F -.-> F1[Gap-Filling Intensification]
        H -.-> H1[Pattern Recognition AI]

        style P fill:#90EE90
        style D fill:#FFE4B5
        style J fill:#F0E68C
        style F fill:#FFB6C1
        style O fill:#ADD8E6
    ```

  decision_guidance:
    when_to_use:
      - Market entry or expansion decisions
      - Competitive positioning strategy
      - Technology assessment and adoption
      - Regulatory compliance research
      - Investment due diligence
      - Strategic planning initiatives
      - Trend forecasting and scenario planning
      - Crisis response intelligence gathering

    complexity_indicators:
      simple: "Single topic, clear sources, minimal stakeholders"
      moderate: "Multiple related topics, diverse sources, several stakeholders"
      complex: "Multi-faceted research, conflicting sources, many stakeholders"
      enterprise: "Strategic implications, confidential elements, board-level impact"

  handoff_prompts:
    discovery_to_core: "Initial discovery complete. Search strategy matrix created with keyword clusters and source prioritization. Beginning targeted intelligence gathering phase."
    core_to_assessment: "Core intelligence gathered from {X} sources. Initiating information value assessment using quality criteria framework."
    assessment_to_competitive: "Information quality meets thresholds ({quality_score}/10). Proceeding to competitive intelligence analysis phase."
    reinforcement_needed: "Information gaps detected in {gap_areas}. Triggering reinforcement search with intensified strategies."
    trends_to_synthesis: "Trend analysis complete. {X} key patterns identified. Beginning strategic synthesis of all intelligence."
    synthesis_to_validation: "Strategic insights synthesized. Initiating comprehensive validation with {X} point verification protocol."
    validation_to_packaging: "Research validated with {confidence_level}% confidence. Ready for intelligence packaging and stakeholder delivery."
    final_complete: "Research-intensive workflow complete. All artifacts exported to docs/ folder. Intelligence ready for strategic application."

  success_metrics:
    research_quality:
      - source_diversity_index: ">= 0.8 (variety across source types)"
      - verification_ratio: ">= 3:1 (sources per major finding)"
      - information_freshness: ">= 75% content < 6 months"
      - expert_validation: ">= 2 expert sources per key insight"
    
    strategic_value:
      - actionable_insights: ">= 5 specific recommendations"
      - competitive_differentiation: ">= 3 unique competitive advantages identified"
      - opportunity_identification: ">= 2 strategic opportunities"
      - risk_mitigation: ">= 3 potential risks with mitigation strategies"